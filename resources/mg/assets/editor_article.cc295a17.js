var un=Object.defineProperty;var yt=Object.getOwnPropertySymbols;var ln=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable;var wt=(t,l,i)=>l in t?un(t,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[l]=i,$t=(t,l)=>{for(var i in l||(l={}))ln.call(l,i)&&wt(t,i,l[i]);if(yt)for(var i of yt(l))rn.call(l,i)&&wt(t,i,l[i]);return t};import{h as re,B as c,a as he,r as G,w as ie,S as ae,a2 as Ge,a3 as an,i as K,d as Fe,a4 as sn,Q as _e,a5 as Te,p as de,n as Ie,k as Ee,o as on,t as cn,x as ge,y as De,D as Xe,G as se,A as oe,P as xt,W as dn,z as Ye,a1 as fn,M as pn,N as hn,R as Qe,O as Bt}from"./element-plus.935a2e22.js";import{g as gn,B as Dn,R as vn}from"./cos.1cd9f046.js";import{_ as mn,w as bn,x as Cn,n as Fn,p as En,m as kn}from"./index.dcbee9bf.js";var An=Object.defineProperty,yn=Object.defineProperties,wn=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,$n=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable,lt=(t,l,i)=>l in t?An(t,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[l]=i,Re=(t,l)=>{for(var i in l||(l={}))$n.call(l,i)&&lt(t,i,l[i]);if(St)for(var i of St(l))xn.call(l,i)&&lt(t,i,l[i]);return t},it=(t,l)=>yn(t,wn(l)),Bn=(t,l,i)=>(lt(t,typeof l!="symbol"?l+"":l,i),i);const Sn="https://at.alicdn.com/t/font_2605852_khjf435c7th.js",et={atom:"https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/atom-one-dark.css",github:"https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/github.css",githubDark:"https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/github-dark.css",js:"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/highlight.min.js"},_t={main:"https://cdn.jsdelivr.net/npm/prettier@2.4.0/standalone.js",markdown:"https://cdn.jsdelivr.net/npm/prettier@2.4.0/parser-markdown.js"},Tt={css:"https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.css",js:"https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.js"},_n="https://cdn.jsdelivr.net/npm/screenfull@5.1.0/dist/screenfull.js",Tn=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","-","codeRow","code","link","image","table","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","htmlPreview","github"],It={"zh-CN":{toolbarTips:{bold:"\u52A0\u7C97",underline:"\u4E0B\u5212\u7EBF",italic:"\u659C\u4F53",strikeThrough:"\u5220\u9664\u7EBF",title:"\u6807\u9898",sub:"\u4E0B\u6807",sup:"\u4E0A\u6807",quote:"\u5F15\u7528",unorderedList:"\u65E0\u5E8F\u5217\u8868",orderedList:"\u6709\u5E8F\u5217\u8868",codeRow:"\u884C\u5185\u4EE3\u7801",code:"\u5757\u7EA7\u4EE3\u7801",link:"\u94FE\u63A5",image:"\u56FE\u7247",table:"\u8868\u683C",revoke:"\u540E\u9000",next:"\u524D\u8FDB",save:"\u4FDD\u5B58",prettier:"\u7F8E\u5316",pageFullscreen:"\u6D4F\u89C8\u5668\u5168\u5C4F",fullscreen:"\u5C4F\u5E55\u5168\u5C4F",preview:"\u9884\u89C8",htmlPreview:"html\u4EE3\u7801\u9884\u89C8",github:"\u6E90\u7801\u5730\u5740"},titleItem:{h1:"\u4E00\u7EA7\u6807\u9898",h2:"\u4E8C\u7EA7\u6807\u9898",h3:"\u4E09\u7EA7\u6807\u9898",h4:"\u56DB\u7EA7\u6807\u9898",h5:"\u4E94\u7EA7\u6807\u9898",h6:"\u516D\u7EA7\u6807\u9898"},imgTitleItem:{link:"\u6DFB\u52A0\u94FE\u63A5",upload:"\u4E0A\u4F20\u56FE\u7247",clip2upload:"\u88C1\u526A\u4E0A\u4F20"},linkModalTips:{title:"\u6DFB\u52A0",descLable:"\u94FE\u63A5\u63CF\u8FF0\uFF1A",descLablePlaceHolder:"\u8BF7\u8F93\u5165\u63CF\u8FF0...",urlLable:"\u94FE\u63A5\u5730\u5740\uFF1A",UrlLablePlaceHolder:"\u8BF7\u8F93\u5165\u94FE\u63A5...",buttonOK:"\u786E\u5B9A"},clipModalTips:{title:"\u88C1\u526A\u56FE\u7247\u4E0A\u4F20",buttonUpload:"\u4E0A\u4F20"},copyCode:{text:"\u590D\u5236\u4EE3\u7801",tips:"\u5DF2\u590D\u5236\uFF01"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",htmlPreview:"html preview",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Img Link",upload:"Upload Img",clip2upload:"Clip Upload"},linkModalTips:{title:"Add ",descLable:"Desc:",descLablePlaceHolder:"Enter a description...",urlLable:"Link:",UrlLablePlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",tips:"Copied!"}}};class In{constructor(){Bn(this,"pools",{})}remove(l,i,h){const C=this.pools[l]&&this.pools[l][i];C&&(this.pools[l][i]=C.filter(o=>o===h))}clear(l){this.pools[l]={}}on(l,i){return this.pools[l]||(this.pools[l]={}),this.pools[l][i.name]||(this.pools[l][i.name]=[]),this.pools[l][i.name].push(i.callback),this.pools[l][i.name].includes(i.callback)}emit(l,i,...h){const C=this.pools[l][i];C&&C.forEach(o=>{try{o(...h)}catch(a){console.error(`${i}\u76D1\u542C\u4E8B\u4EF6\u6267\u884C\u5F02\u5E38\uFF01`,a)}})}}var I=new In;const Rn=(t,l)=>{const{editorId:i}=t,h=o=>{var a,D;return((a=t.toolbars)==null?void 0:a.includes(o))&&!((D=t.toolbarsExclude)==null?void 0:D.includes(o))},b=o=>{if(o.target===document.querySelector(`#${t.editorId}-textarea`))if(o.ctrlKey||o.metaKey)switch(o.code){case"KeyS":{o.shiftKey?h("strikeThrough")&&I.emit(i,"replace","strikeThrough"):h("save")&&(I.emit(i,"onSave",t.modelValue),o.preventDefault());break}case"KeyB":{h("bold")&&(I.emit(i,"replace","bold"),o.preventDefault());break}case"KeyU":{o.shiftKey?h("unorderedList")&&(I.emit(i,"replace","unorderedList"),o.preventDefault()):h("underline")&&(I.emit(i,"replace","underline"),o.preventDefault());break}case"KeyI":{o.shiftKey?h("image")&&(I.emit(i,"openModals","image"),o.preventDefault()):h("italic")&&(I.emit(i,"replace","italic"),o.preventDefault());break}case"Digit1":{h("title")&&(I.emit(i,"replace","h1"),o.preventDefault());break}case"Digit2":{h("title")&&(I.emit(i,"replace","h2"),o.preventDefault());break}case"Digit3":{h("title")&&(I.emit(i,"replace","h3"),o.preventDefault());break}case"Digit4":{h("title")&&(I.emit(i,"replace","h4"),o.preventDefault());break}case"Digit5":{h("title")&&(I.emit(i,"replace","h5"),o.preventDefault());break}case"Digit6":{h("title")&&(I.emit(i,"replace","h6"),o.preventDefault());break}case"ArrowUp":{h("sup")&&(I.emit(i,"replace","sup"),o.preventDefault());break}case"ArrowDown":{h("sub")&&(I.emit(i,"replace","sub"),o.preventDefault());break}case"KeyQ":{I.emit(i,"replace","quote"),o.preventDefault();break}case"KeyO":{h("orderedList")&&(I.emit(i,"replace","orderedList"),o.preventDefault());break}case"KeyC":{if(o.shiftKey)h("code")&&(I.emit(i,"replace","code"),o.preventDefault());else if(o.altKey)h("codeRow")&&(I.emit(i,"replace","codeRow"),o.preventDefault());else{o.preventDefault(),I.emit(i,"replace","ctrlC");break}break}case"KeyL":{h("link")&&(I.emit(i,"openModals","link"),o.preventDefault());break}case"KeyZ":{o.shiftKey?h("next")&&(I.emit(i,"ctrlShiftZ"),o.preventDefault()):h("revoke")&&(I.emit(i,"ctrlZ"),o.preventDefault());break}case"KeyF":{o.shiftKey&&h("prettier")&&(I.emit(i,"replace","prettier"),o.preventDefault());break}case"KeyT":{o.altKey&&o.shiftKey&&h("table")&&(I.emit(i,"replace","table"),o.preventDefault());break}case"KeyX":{I.emit(i,"replace","ctrlX"),o.preventDefault();break}case"KeyD":{o.preventDefault(),I.emit(i,"replace","ctrlD");break}}else o.code==="Tab"&&(o.preventDefault(),o.shiftKey?I.emit(i,"replace","shiftTab"):I.emit(i,"replace","tab"))},C=o=>{if(o.clipboardData&&o.clipboardData.files.length>0){const a=o.clipboardData.files[0];/image\/.*/.test(a.type)&&(I.emit(i,"uploadImage",[a]),o.preventDefault())}};ae(()=>{t.previewOnly||(window.addEventListener("keydown",b),document.addEventListener("paste",C),I.on(i,{name:"onSave",callback(){t.onSave?t.onSave(t.modelValue):l.emit("onSave",t.modelValue)}}))}),Ge(()=>{t.previewOnly||(window.removeEventListener("keydown",b),document.removeEventListener("paste",C))})},zn=t=>{const{previewOnly:l,editorId:i,tabWidth:h,showCodeRowNumber:b,Cropper:C}=t;de("editorId",i),de("tabWidth",h);const o=Fe(()=>{let D=et.atom;if(t.highlightCss)D=t.highlightCss;else switch(t.previewTheme){case"github":{t.theme==="dark"?D=et.githubDark:D=et.github;break}}return{js:t.highlightJs,css:D}});de("highlight",o),de("historyLength",t.historyLength),de("previewOnly",l),de("showCodeRowNumber",b);const a=Fe(()=>{const D=Re(Re({},It),t.languageUserDefined);return D[t.language]?D[t.language]:It["zh-CN"]});de("usedLanguageText",a),de("Cropper",C),de("previewTheme",Fe(()=>t.previewTheme))};var Ln=re({setup(){return()=>c("div",{class:`${m}-divider`},null)}});const tt=({instance:t,ctx:l,props:i={}},h="default")=>{const b=(t==null?void 0:t.$slots[h])||(l==null?void 0:l.slots[h]);return(b?b(t):"")||i[h]};var Rt=re({props:{trigger:{type:String,default:"hover"},overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>()=>{}}},setup(t,l){const i=`${m}-dropdown-hidden`,h=he({overlayClass:[i],overlayStyle:{},triggerHover:!1,overlayHover:!1}),b=G(),C=G(),o=()=>{t.trigger==="hover"&&(h.triggerHover=!0);const A=b.value,$=C.value,x=A.getBoundingClientRect(),F=A.offsetTop,T=A.offsetLeft,O=x.height,U=x.width;h.overlayStyle=it(Re({},h.overlayStyle),{top:F+O+"px",left:T-$.offsetWidth/2+U/2+"px"}),t.onChange(!0)},a=()=>{h.overlayHover=!0};ie(()=>t.visible,A=>{A?h.overlayClass=h.overlayClass.filter($=>$!==i):h.overlayClass.push(i)});const D=A=>{const $=b.value,x=C.value;!$.contains(A.target)&&!x.contains(A.target)&&t.onChange(!1)};let k=-1;const w=A=>{b.value===A.target?h.triggerHover=!1:h.overlayHover=!1,clearTimeout(k),k=window.setTimeout(()=>{!h.overlayHover&&!h.triggerHover&&t.onChange(!1)},10)};return ae(()=>{t.trigger==="click"?(b.value.addEventListener("click",o),document.addEventListener("click",D)):(b.value.addEventListener("mouseenter",o),b.value.addEventListener("mouseleave",w),C.value.addEventListener("mouseenter",a),C.value.addEventListener("mouseleave",w))}),Ge(()=>{t.trigger==="click"?(b.value.removeEventListener("click",o),document.removeEventListener("click",D)):(b.value.removeEventListener("mouseenter",o),b.value.removeEventListener("mouseleave",w),C.value.removeEventListener("mouseenter",a),C.value.removeEventListener("mouseleave",w))}),()=>{const A=tt({ctx:l}),$=tt({props:t,ctx:l},"overlay"),x=an(A instanceof Array?A[0]:A,{ref:b}),F=c("div",{class:[`${m}-dropdown`,h.overlayClass],style:h.overlayStyle,ref:C},[c("div",{class:`${m}-dropdown-overlay`},[$ instanceof Array?$[0]:$])]);return[x,F]}}});const ce=(t,l=0,i=l)=>{t.setSelectionRange?setTimeout(()=>{t.setSelectionRange(l,i),t.focus()},0):console.log("\u65E0\u6CD5\u91CD\u7F6E\u5149\u6807\u4F4D\u7F6E\uFF01")},rt=(t,l,i)=>{const{deviationStart:h=0,deviationEnd:b=0,direct:C=!1,select:o=!1}=i;let a="";if(t.selectionStart||t.selectionStart===0){const D=t.selectionStart,k=t.selectionEnd||0,{prefixVal:w=t.value.substring(0,D),subfixVal:A=t.value.substring(k,t.value.length)}=i;a=w+l+A,ce(t,o?D+h:D+l.length+b,D+l.length+b)}else a+=l;return C&&(t.value=a),a},jn=(t,l={newWindow:!0,nofollow:!0})=>{t||console.warn("\u65E0\u6548\u7684\u94FE\u63A5\uFF01");const i=document.createElement("a");i.href=t,i.style.display="none",l.newWindow&&(i.target="_blank"),l.nofollow&&(i.rel="noopener noreferrer"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},zt=(t,l)=>{const i=t.clientHeight,h=l.clientHeight,b=t.scrollHeight,C=l.scrollHeight,o=(b-i)/(C-h),a=()=>{l.scrollTo({top:t.scrollTop/o})};return t.removeEventListener("scroll",a),t.addEventListener("scroll",a),()=>{t.removeEventListener("scroll",a)}},On=(t,l="image.png")=>{const i=t.split(","),h=i[0].match(/:(.*?);/);if(h){const b=h[1],C=atob(i[1]);let o=C.length;const a=new Uint8Array(o);for(;o--;)a[o]=C.charCodeAt(o);return new File([a],l,{type:b})}return null},Lt=t=>{if(!t.trim())return t;const l=t.split(`
`),i=['<span rn-wrapper aria-hidden="true">'];return l.forEach(()=>{i.push("<span></span>")}),i.push("</span>"),`<span class="code-block">${t}</span>${i.join("")}`},Pn=(t,l)=>{const i=h=>{if(h.target!==t)return;const b=t.parentElement||document.body,C=b.offsetWidth,o=b.offsetHeight,{clientWidth:a}=document.documentElement,{clientHeight:D}=document.documentElement,k=h.offsetX,w=h.offsetY,A=x=>{let F=(x.pageX||x.clientX+document.body.scrollLeft-document.body.clientLeft)-k,T=(x.pageY||x.clientY+document.body.scrollTop-document.body.clientTop)-w;F=F<1?1:F<a-C-1?F:a-C-1,T=T<1?1:T<D-o-1?T:D-o-1,l?l(F,T):(b.style.left=`${F}px`,b.style.top=`${T}px`)};document.addEventListener("mousemove",A);const $=()=>{document.removeEventListener("mousemove",A),t.removeEventListener("mouseup",$)};t.addEventListener("mouseup",$)};return t.addEventListener("mousedown",i),()=>{t.removeEventListener("mousedown",i)}};var jt=re({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClosed:{type:Function,default:()=>()=>{}},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>()=>{}}},setup(t,l){const i=G(t.visible),h=G([`${m}-modal`]),b=G(),C=G();let o=()=>{};const a=he({initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}});return ae(()=>{o=Pn(C.value,(D,k)=>{a.initPos.left=D+"px",a.initPos.top=k+"px"})}),Ge(()=>{o()}),ie(()=>t.visible,D=>{D?(h.value.push("zoom-in"),i.value=D,Ie(()=>{const k=b.value.offsetWidth/2,w=b.value.offsetHeight/2,A=document.documentElement.clientWidth/2,$=document.documentElement.clientHeight/2;a.initPos.left=A-k+"px",a.initPos.top=$-w+"px"}),setTimeout(()=>{h.value=h.value.filter(k=>k!=="zoom-in")},140)):(h.value.push("zoom-out"),setTimeout(()=>{h.value=h.value.filter(k=>k!=="zoom-out"),i.value=D},130))}),()=>{const D=tt({ctx:l}),k=tt({props:t,ctx:l},"title");return c("div",{style:{display:i.value?"block":"none"}},[c("div",{class:`${m}-modal-mask`,onClick:t.onClosed},null),c("div",{class:h.value,style:it(Re({},a.initPos),{width:t.width,height:t.height}),ref:b},[c("div",{class:`${m}-modal-header`,ref:C},[c("div",{class:`${m}-modal-title`},[k||""]),c("div",{class:`${m}-modal-func`},[t.showAdjust&&c("div",{class:`${m}-modal-adjust`,onClick:w=>{w.stopPropagation(),t.isFullscreen?a.initPos=a.historyPos:(a.historyPos=a.initPos,a.initPos={left:"0",top:"0"}),t.onAdjust(!t.isFullscreen)}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":`#icon-${t.isFullscreen?"suoxiao":"fangda"}`},null)])]),c("div",{class:`${m}-modal-close`,onClick:w=>{w.stopPropagation(),t.onClosed&&t.onClosed()}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-close"},null)])])])]),c("div",{class:`${m}-modal-body`},[D])])])}}}),Hn=re({props:{type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}},onClip:{type:Function,default:()=>()=>{}}},setup(t){const l=K("usedLanguageText"),i=K("editorId"),h=Fe(()=>{var C,o,a,D;switch(t.type){case"link":return`${(C=l.value.linkModalTips)==null?void 0:C.title}${(o=l.value.toolbarTips)==null?void 0:o.link}`;case"image":return`${(a=l.value.linkModalTips)==null?void 0:a.title}${(D=l.value.toolbarTips)==null?void 0:D.image}`;default:return""}}),b=he({desc:"",url:""});return ie(()=>t.visible,C=>{C||setTimeout(()=>{b.desc="",b.url=""},200)}),()=>c(jt,{title:h.value,visible:t.visible,onClosed:t.onCancel},{default:()=>{var C,o,a,D,k;return[c("div",{class:`${m}-form-item`},[c("label",{class:`${m}-lable`,for:`link-desc-${i}`},[(C=l.value.linkModalTips)==null?void 0:C.descLable]),c("input",{placeholder:(o=l.value.linkModalTips)==null?void 0:o.descLablePlaceHolder,class:`${m}-input`,id:`link-desc-${i}`,type:"text",value:b.desc,onChange:w=>{b.desc=w.target.value},autocomplete:"off"},null)]),c("div",{class:`${m}-form-item`},[c("label",{class:`${m}-lable`,for:`link-url-${i}`},[(a=l.value.linkModalTips)==null?void 0:a.urlLable]),c("input",{placeholder:(D=l.value.linkModalTips)==null?void 0:D.UrlLablePlaceHolder,class:`${m}-input`,id:`link-url-${i}`,type:"text",value:b.url,onChange:w=>{b.url=w.target.value},autocomplete:"off"},null)]),c("div",{class:`${m}-form-item`},[c("button",{class:[`${m}-btn`,`${m}-btn-row`],type:"button",onClick:()=>{t.onOk(b),b.desc="",b.url=""}},[(k=l.value.linkModalTips)==null?void 0:k.buttonOK])])]}})}}),Un=re({props:{visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}}},setup(t){const l=K("usedLanguageText"),i=K("editorId");let h=K("Cropper");const b=G(),C=G(),o=G(),a=he({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let D=null;ie(()=>t.visible,()=>{t.visible&&!a.cropperInited&&(h=h||window.Cropper,b.value.onchange=()=>{const A=b.value.files||[];if(a.imgSelected=!0,(A==null?void 0:A.length)>0){const $=new FileReader;$.onload=x=>{a.imgSrc=x.target.result,Ie(()=>{D=new h(C.value,{viewMode:2,preview:`.${m}-clip-preview-target`})})},$.readAsDataURL(A[0])}})}),ie(()=>[a.imgSelected],()=>{o.value.style=""}),ie(()=>a.isFullscreen,()=>{Ie(()=>{D==null||D.destroy(),o.value.style="",C.value&&(D=new h(C.value,{viewMode:2,preview:`.${m}-clip-preview-target`}))})});const k=Fe(()=>a.isFullscreen?{width:"100%",height:"100%"}:{width:"668px",height:"421px"}),w=()=>{D.destroy(),b.value.value="",a.imgSelected=!1};return()=>{var A;return c(jt,sn({title:(A=l.value.clipModalTips)==null?void 0:A.title,visible:t.visible,onClosed:t.onCancel,showAdjust:!0,isFullscreen:a.isFullscreen,onAdjust:$=>{a.isFullscreen=$}},k.value),{default:()=>{var $;return[c("div",{class:`${m}-form-item ${m}-clip`},[c("div",{class:`${m}-clip-main`},[a.imgSelected?c("div",{class:`${m}-clip-cropper`},[c("img",{src:a.imgSrc,ref:C,style:{display:"none"}},null),c("div",{class:`${m}-clip-delete`,onClick:w},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-delete"},null)])])]):c("div",{class:`${m}-clip-upload`,onClick:()=>{b.value.click()}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-upload"},null)])])]),c("div",{class:`${m}-clip-preview`},[c("div",{class:`${m}-clip-preview-target`,ref:o},null)])]),c("div",{class:`${m}-form-item`},[c("button",{class:`${m}-btn`,type:"button",onClick:()=>{const x=D.getCroppedCanvas();I.emit(i,"uploadImage",[On(x.toDataURL("image/png"))],t.onOk),w()}},[($=l.value.linkModalTips)==null?void 0:$.buttonOK])]),c("input",{ref:b,accept:"image/*",type:"file",multiple:!1,style:{display:"none"}},null)]}})}}}),Nn=re({props:{type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}}},setup(t){return()=>c(_e,null,[c(Hn,{type:t.type,visible:t.linkVisible,onOk:t.onOk,onCancel:t.onCancel},null),c(Un,{visible:t.clipVisible,onOk:t.onOk,onCancel:t.onCancel},null)])}});const Vn=t=>{let{screenfull:l}=t;const i=()=>{l.isEnabled?l.isFullscreen?l.exit():l.request():console.error("browser does not support screenfull!")},h=()=>{l=window.screenfull,l&&l.isEnabled&&l.on("change",()=>{t.updateSetting(!t.setting.fullscreen,"fullscreen")})};return ae(()=>{l&&l.isEnabled&&l.on("change",()=>{t.updateSetting(!t.setting.fullscreen,"fullscreen")})}),{fullScreenHandler:i,screenfullLoad:h}};var qn=re({name:"MDEditorToolbar",props:{toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>()=>{}}},setup(t){const l=K("editorId"),i=K("usedLanguageText"),h=K("previewOnly"),{fullScreenHandler:b,screenfullLoad:C}=Vn(t),o=he({title:!1,catalog:!1,image:!1}),a=(F,T)=>{I.emit(l,"replace",F,T)},D=he({type:"link",linkVisible:!1,clipVisible:!1});I.on(l,{name:"openModals",callback(F){D.type=F,D.linkVisible=!0}});const k=G();ae(()=>{var F;(F=k.value)==null||F.addEventListener("mouseover",()=>{var T;((T=window.getSelection())==null?void 0:T.toString())||I.emit(l,"selectTextChange","")})});const w=Fe(()=>{const F=t.toolbars.filter(H=>!t.toolbarsExclude.includes(H)),T=F.indexOf("="),O=T===-1?F:F.slice(0,T+1),U=T===-1?[]:F.slice(T,Number.MAX_SAFE_INTEGER);return[O,U]}),A=G(),$=()=>{I.emit(l,"uploadImage",A.value.files),A.value.value=""};ae(()=>{A.value.addEventListener("change",$)});const x=F=>{var T,O,U,H,X,Z,le,Y,Q,ne,ee,fe,ve,ke,Oe,Pe,He,Ae,Ue,Ne,Ve,W,qe,me,be,te,Ke,ye,Me,we,pe;switch(F){case"-":return c(Ln,null,null);case"bold":return c("div",{class:`${m}-toolbar-item`,title:(T=i.value.toolbarTips)==null?void 0:T.bold,onClick:()=>{a("bold")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-bold"},null)])]);case"underline":return c("div",{class:`${m}-toolbar-item`,title:(O=i.value.toolbarTips)==null?void 0:O.underline,onClick:()=>{a("underline")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-underline"},null)])]);case"italic":return c("div",{class:`${m}-toolbar-item`,title:(U=i.value.toolbarTips)==null?void 0:U.italic,onClick:()=>{a("italic")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-italic"},null)])]);case"strikeThrough":return c("div",{class:`${m}-toolbar-item`,title:(H=i.value.toolbarTips)==null?void 0:H.strikeThrough,onClick:()=>{a("strikeThrough")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-strike-through"},null)])]);case"title":return c(Rt,{visible:o.title,onChange:j=>{o.title=j},overlay:c("ul",{class:`${m}-menu`,onClick:()=>{o.title=!1}},[c("li",{class:`${m}-menu-item`,onClick:()=>{a("h1")}},[(X=i.value.titleItem)==null?void 0:X.h1]),c("li",{class:`${m}-menu-item`,onClick:()=>{a("h2")}},[(Z=i.value.titleItem)==null?void 0:Z.h2]),c("li",{class:`${m}-menu-item`,onClick:()=>{a("h3")}},[(le=i.value.titleItem)==null?void 0:le.h3]),c("li",{class:`${m}-menu-item`,onClick:()=>{a("h4")}},[(Y=i.value.titleItem)==null?void 0:Y.h4]),c("li",{class:`${m}-menu-item`,onClick:()=>{a("h5")}},[(Q=i.value.titleItem)==null?void 0:Q.h5]),c("li",{class:`${m}-menu-item`,onClick:()=>{a("h6")}},[(ne=i.value.titleItem)==null?void 0:ne.h6])])},{default:()=>{var j;return[c("div",{class:`${m}-toolbar-item`,title:(j=i.value.toolbarTips)==null?void 0:j.title},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-title"},null)])])]}});case"sub":return c("div",{class:`${m}-toolbar-item`,title:(ee=i.value.toolbarTips)==null?void 0:ee.sub,onClick:()=>{a("sub")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-sub"},null)])]);case"sup":return c("div",{class:`${m}-toolbar-item`,title:(fe=i.value.toolbarTips)==null?void 0:fe.sup,onClick:()=>{a("sup")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-sup"},null)])]);case"quote":return c("div",{class:`${m}-toolbar-item`,title:(ve=i.value.toolbarTips)==null?void 0:ve.quote,onClick:()=>{a("quote")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-quote"},null)])]);case"unorderedList":return c("div",{class:`${m}-toolbar-item`,title:(ke=i.value.toolbarTips)==null?void 0:ke.unorderedList,onClick:()=>{a("unorderedList")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-unordered-list"},null)])]);case"orderedList":return c("div",{class:`${m}-toolbar-item`,title:(Oe=i.value.toolbarTips)==null?void 0:Oe.orderedList,onClick:()=>{a("orderedList")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-ordered-list"},null)])]);case"codeRow":return c("div",{class:`${m}-toolbar-item`,title:(Pe=i.value.toolbarTips)==null?void 0:Pe.codeRow,onClick:()=>{a("codeRow")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-code-row"},null)])]);case"code":return c("div",{class:`${m}-toolbar-item`,title:(He=i.value.toolbarTips)==null?void 0:He.code,onClick:()=>{a("code")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-code"},null)])]);case"link":return c("div",{class:`${m}-toolbar-item`,title:(Ae=i.value.toolbarTips)==null?void 0:Ae.link,onClick:()=>{D.type="link",D.linkVisible=!0}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-link"},null)])]);case"image":return c(Rt,{visible:o.image,onChange:j=>{o.image=j},overlay:c("ul",{class:`${m}-menu`,onClick:()=>{o.title=!1}},[c("li",{class:`${m}-menu-item`,onClick:()=>{D.type="image",D.linkVisible=!0}},[(Ue=i.value.imgTitleItem)==null?void 0:Ue.link]),c("li",{class:`${m}-menu-item`,onClick:()=>{A.value.click()}},[(Ne=i.value.imgTitleItem)==null?void 0:Ne.upload]),c("li",{class:`${m}-menu-item`,onClick:()=>{D.clipVisible=!0}},[(Ve=i.value.imgTitleItem)==null?void 0:Ve.clip2upload])])},{default:()=>{var j;return[c("div",{class:`${m}-toolbar-item`,title:(j=i.value.toolbarTips)==null?void 0:j.image},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-image"},null)])])]}});case"table":return c("div",{class:`${m}-toolbar-item`,title:(W=i.value.toolbarTips)==null?void 0:W.table,onClick:()=>{a("table")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-table"},null)])]);case"revoke":return c("div",{class:`${m}-toolbar-item`,title:(qe=i.value.toolbarTips)==null?void 0:qe.revoke,onClick:()=>{I.emit(l,"ctrlZ")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-revoke"},null)])]);case"next":return c("div",{class:`${m}-toolbar-item`,title:(me=i.value.toolbarTips)==null?void 0:me.next,onClick:()=>{I.emit(l,"ctrlShiftZ")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-next"},null)])]);case"save":return c("div",{class:`${m}-toolbar-item`,title:(be=i.value.toolbarTips)==null?void 0:be.save,onClick:()=>{I.emit(l,"onSave")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-baocun"},null)])]);case"prettier":return c("div",{class:`${m}-toolbar-item`,title:(te=i.value.toolbarTips)==null?void 0:te.prettier,onClick:()=>{a("prettier")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-prettier"},null)])]);case"pageFullscreen":return!t.setting.fullscreen&&c("div",{class:`${m}-toolbar-item`,title:(Ke=i.value.toolbarTips)==null?void 0:Ke.pageFullscreen,onClick:()=>{t.updateSetting(!t.setting.pageFullScreen,"pageFullScreen")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":`#icon-${t.setting.pageFullScreen?"suoxiao":"fangda"}`},null)])]);case"fullscreen":return c("div",{class:`${m}-toolbar-item`,title:(ye=i.value.toolbarTips)==null?void 0:ye.fullscreen,onClick:b},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":`#icon-${t.setting.fullscreen?"fullScreen-exit":"fullScreen"}`},null)])]);case"preview":return c("div",{class:`${m}-toolbar-item`,title:(Me=i.value.toolbarTips)==null?void 0:Me.preview,onClick:()=>{t.updateSetting(!t.setting.preview,"preview")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-preview"},null)])]);case"htmlPreview":return c("div",{class:`${m}-toolbar-item`,title:(we=i.value.toolbarTips)==null?void 0:we.htmlPreview,onClick:()=>{t.updateSetting(!t.setting.htmlPreview,"htmlPreview")}},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-coding"},null)])]);case"github":return c("div",{class:`${m}-toolbar-item`,title:(pe=i.value.toolbarTips)==null?void 0:pe.github,onClick:()=>jn("https://github.com/imzbf/md-editor-v3")},[c("svg",{class:`${m}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-github"},null)])])}};return()=>{const F=w.value[0].map(O=>x(O)),T=w.value[1].map(O=>x(O));return c("div",{class:`${m}-toolbar-wrapper`},[c("div",{class:`${m}-toolbar`},[c("div",{class:`${m}-toolbar-left`,ref:k},[F]),c("div",{class:`${m}-toolbar-right`},[T])]),c("input",{ref:A,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),c(Nn,{linkVisible:D.linkVisible,clipVisible:D.clipVisible,type:D.type,onCancel:()=>{D.linkVisible=!1,D.clipVisible=!1},onOk:O=>{O&&a(D.type,{desc:O.desc,url:O.url}),D.linkVisible=!1,D.clipVisible=!1}},null),!h&&t.screenfull===null&&c(Te,{to:"head"},{default:()=>[c("script",{src:t.screenfullJs,onLoad:C},null)]})])}}}),Kn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ot={exports:{}};(function(t,l){(function(i,h){t.exports=h()})(Kn,function(){function i(p,s){for(var f=0;f<s.length;f++){var e=s[f];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(p,e.key,e)}}function h(p,s,f){return s&&i(p.prototype,s),f&&i(p,f),p}function b(p,s){if(!!p){if(typeof p=="string")return C(p,s);var f=Object.prototype.toString.call(p).slice(8,-1);if(f==="Object"&&p.constructor&&(f=p.constructor.name),f==="Map"||f==="Set")return Array.from(p);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return C(p,s)}}function C(p,s){(s==null||s>p.length)&&(s=p.length);for(var f=0,e=new Array(s);f<s;f++)e[f]=p[f];return e}function o(p,s){var f=typeof Symbol!="undefined"&&p[Symbol.iterator]||p["@@iterator"];if(f)return(f=f.call(p)).next.bind(f);if(Array.isArray(p)||(f=b(p))||s&&p&&typeof p.length=="number"){f&&(p=f);var e=0;return function(){return e>=p.length?{done:!0}:{done:!1,value:p[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a={exports:{}};function D(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function k(p){a.exports.defaults=p}a.exports={defaults:D(),getDefaults:D,changeDefaults:k};var w=/[&<>"']/,A=/[&<>"']/g,$=/[<>"']|&(?!#?\w+;)/,x=/[<>"']|&(?!#?\w+;)/g,F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},T=function(s){return F[s]};function O(p,s){if(s){if(w.test(p))return p.replace(A,T)}else if($.test(p))return p.replace(x,T);return p}var U=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function H(p){return p.replace(U,function(s,f){return f=f.toLowerCase(),f==="colon"?":":f.charAt(0)==="#"?f.charAt(1)==="x"?String.fromCharCode(parseInt(f.substring(2),16)):String.fromCharCode(+f.substring(1)):""})}var X=/(^|[^\[])\^/g;function Z(p,s){p=p.source||p,s=s||"";var f={replace:function(n,u){return u=u.source||u,u=u.replace(X,"$1"),p=p.replace(n,u),f},getRegex:function(){return new RegExp(p,s)}};return f}var le=/[^\w:]/g,Y=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Q(p,s,f){if(p){var e;try{e=decodeURIComponent(H(f)).replace(le,"").toLowerCase()}catch{return null}if(e.indexOf("javascript:")===0||e.indexOf("vbscript:")===0||e.indexOf("data:")===0)return null}s&&!Y.test(f)&&(f=ke(s,f));try{f=encodeURI(f).replace(/%25/g,"%")}catch{return null}return f}var ne={},ee=/^[^:]+:\/*[^/]*$/,fe=/^([^:]+:)[\s\S]*$/,ve=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ke(p,s){ne[" "+p]||(ee.test(p)?ne[" "+p]=p+"/":ne[" "+p]=Ae(p,"/",!0)),p=ne[" "+p];var f=p.indexOf(":")===-1;return s.substring(0,2)==="//"?f?s:p.replace(fe,"$1")+s:s.charAt(0)==="/"?f?s:p.replace(ve,"$1")+s:p+s}var Oe={exec:function(){}};function Pe(p){for(var s=1,f,e;s<arguments.length;s++){f=arguments[s];for(e in f)Object.prototype.hasOwnProperty.call(f,e)&&(p[e]=f[e])}return p}function He(p,s){var f=p.replace(/\|/g,function(u,d,r){for(var g=!1,v=d;--v>=0&&r[v]==="\\";)g=!g;return g?"|":" |"}),e=f.split(/ \|/),n=0;if(e.length>s)e.splice(s);else for(;e.length<s;)e.push("");for(;n<e.length;n++)e[n]=e[n].trim().replace(/\\\|/g,"|");return e}function Ae(p,s,f){var e=p.length;if(e===0)return"";for(var n=0;n<e;){var u=p.charAt(e-n-1);if(u===s&&!f)n++;else if(u!==s&&f)n++;else break}return p.substr(0,e-n)}function Ue(p,s){if(p.indexOf(s[1])===-1)return-1;for(var f=p.length,e=0,n=0;n<f;n++)if(p[n]==="\\")n++;else if(p[n]===s[0])e++;else if(p[n]===s[1]&&(e--,e<0))return n;return-1}function Ne(p){p&&p.sanitize&&!p.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ve(p,s){if(s<1)return"";for(var f="";s>1;)s&1&&(f+=p),s>>=1,p+=p;return f+p}var W={escape:O,unescape:H,edit:Z,cleanUrl:Q,resolveUrl:ke,noopTest:Oe,merge:Pe,splitCells:He,rtrim:Ae,findClosingBracket:Ue,checkSanitizeDeprecation:Ne,repeatString:Ve},qe=a.exports.defaults,me=W.rtrim,be=W.splitCells,te=W.escape,Ke=W.findClosingBracket;function ye(p,s,f){var e=s.href,n=s.title?te(s.title):null,u=p[1].replace(/\\([\[\]])/g,"$1");return p[0].charAt(0)!=="!"?{type:"link",raw:f,href:e,title:n,text:u}:{type:"image",raw:f,href:e,title:n,text:te(u)}}function Me(p,s){var f=p.match(/^(\s+)(?:```)/);if(f===null)return s;var e=f[1];return s.split(`
`).map(function(n){var u=n.match(/^\s+/);if(u===null)return n;var d=u[0];return d.length>=e.length?n.slice(e.length):n}).join(`
`)}var we=function(){function p(f){this.options=f||qe}var s=p.prototype;return s.space=function(e){var n=this.rules.block.newline.exec(e);if(n)return n[0].length>1?{type:"space",raw:n[0]}:{raw:`
`}},s.code=function(e){var n=this.rules.block.code.exec(e);if(n){var u=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?u:me(u,`
`)}}},s.fences=function(e){var n=this.rules.block.fences.exec(e);if(n){var u=n[0],d=Me(u,n[3]||"");return{type:"code",raw:u,lang:n[2]?n[2].trim():n[2],text:d}}},s.heading=function(e){var n=this.rules.block.heading.exec(e);if(n){var u=n[2].trim();if(/#$/.test(u)){var d=me(u,"#");(this.options.pedantic||!d||/ $/.test(d))&&(u=d.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:u}}},s.nptable=function(e){var n=this.rules.block.nptable.exec(e);if(n){var u={type:"table",header:be(n[1].replace(/^ *| *\| *$/g,"")),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3]?n[3].replace(/\n$/,"").split(`
`):[],raw:n[0]};if(u.header.length===u.align.length){var d=u.align.length,r;for(r=0;r<d;r++)/^ *-+: *$/.test(u.align[r])?u.align[r]="right":/^ *:-+: *$/.test(u.align[r])?u.align[r]="center":/^ *:-+ *$/.test(u.align[r])?u.align[r]="left":u.align[r]=null;for(d=u.cells.length,r=0;r<d;r++)u.cells[r]=be(u.cells[r],u.header.length);return u}}},s.hr=function(e){var n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}},s.blockquote=function(e){var n=this.rules.block.blockquote.exec(e);if(n){var u=n[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:n[0],text:u}}},s.list=function(e){var n=this.rules.block.list.exec(e);if(n){var u=n[0],d=n[2],r=d.length>1,g={type:"list",raw:u,ordered:r,start:r?+d.slice(0,-1):"",loose:!1,items:[]},v=n[0].match(this.rules.block.item),E=!1,y,L,P,R,S,N,V,J,ue,q=v.length;P=this.rules.block.listItemStart.exec(v[0]);for(var M=0;M<q;M++){if(y=v[M],u=y,this.options.pedantic||(ue=y.match(new RegExp("\\n\\s*\\n {0,"+(P[0].length-1)+"}\\S")),ue&&(S=y.length-ue.index+v.slice(M+1).join(`
`).length,g.raw=g.raw.substring(0,g.raw.length-S),y=y.substring(0,ue.index),u=y,q=M+1)),M!==q-1){if(R=this.rules.block.listItemStart.exec(v[M+1]),this.options.pedantic?R[1].length>P[1].length:R[1].length>=P[0].length||R[1].length>3){v.splice(M,2,v[M]+(!this.options.pedantic&&R[1].length<P[0].length&&!v[M].match(/\n$/)?"":`
`)+v[M+1]),M--,q--;continue}else(!this.options.pedantic||this.options.smartLists?R[2][R[2].length-1]!==d[d.length-1]:r===(R[2].length===1))&&(S=v.slice(M+1).join(`
`).length,g.raw=g.raw.substring(0,g.raw.length-S),M=q-1);P=R}L=y.length,y=y.replace(/^ *([*+-]|\d+[.)]) ?/,""),~y.indexOf(`
 `)&&(L-=y.length,y=this.options.pedantic?y.replace(/^ {1,4}/gm,""):y.replace(new RegExp("^ {1,"+L+"}","gm"),"")),y=me(y,`
`),M!==q-1&&(u=u+`
`),N=E||/\n\n(?!\s*$)/.test(u),M!==q-1&&(E=u.slice(-2)===`

`,N||(N=E)),N&&(g.loose=!0),this.options.gfm&&(V=/^\[[ xX]\] /.test(y),J=void 0,V&&(J=y[1]!==" ",y=y.replace(/^\[[ xX]\] +/,""))),g.items.push({type:"list_item",raw:u,task:V,checked:J,loose:N,text:y})}return g}},s.html=function(e){var n=this.rules.block.html.exec(e);if(n)return{type:this.options.sanitize?"paragraph":"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):te(n[0]):n[0]}},s.def=function(e){var n=this.rules.block.def.exec(e);if(n){n[3]&&(n[3]=n[3].substring(1,n[3].length-1));var u=n[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:u,raw:n[0],href:n[2],title:n[3]}}},s.table=function(e){var n=this.rules.block.table.exec(e);if(n){var u={type:"table",header:be(n[1].replace(/^ *| *\| *$/g,"")),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3]?n[3].replace(/\n$/,"").split(`
`):[]};if(u.header.length===u.align.length){u.raw=n[0];var d=u.align.length,r;for(r=0;r<d;r++)/^ *-+: *$/.test(u.align[r])?u.align[r]="right":/^ *:-+: *$/.test(u.align[r])?u.align[r]="center":/^ *:-+ *$/.test(u.align[r])?u.align[r]="left":u.align[r]=null;for(d=u.cells.length,r=0;r<d;r++)u.cells[r]=be(u.cells[r].replace(/^ *\| *| *\| *$/g,""),u.header.length);return u}}},s.lheading=function(e){var n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1]}},s.paragraph=function(e){var n=this.rules.block.paragraph.exec(e);if(n)return{type:"paragraph",raw:n[0],text:n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1]}},s.text=function(e){var n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0]}},s.escape=function(e){var n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:te(n[1])}},s.tag=function(e,n,u){var d=this.rules.inline.tag.exec(e);if(d)return!n&&/^<a /i.test(d[0])?n=!0:n&&/^<\/a>/i.test(d[0])&&(n=!1),!u&&/^<(pre|code|kbd|script)(\s|>)/i.test(d[0])?u=!0:u&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(d[0])&&(u=!1),{type:this.options.sanitize?"text":"html",raw:d[0],inLink:n,inRawBlock:u,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(d[0]):te(d[0]):d[0]}},s.link=function(e){var n=this.rules.inline.link.exec(e);if(n){var u=n[2].trim();if(!this.options.pedantic&&/^</.test(u)){if(!/>$/.test(u))return;var d=me(u.slice(0,-1),"\\");if((u.length-d.length)%2==0)return}else{var r=Ke(n[2],"()");if(r>-1){var g=n[0].indexOf("!")===0?5:4,v=g+n[1].length+r;n[2]=n[2].substring(0,r),n[0]=n[0].substring(0,v).trim(),n[3]=""}}var E=n[2],y="";if(this.options.pedantic){var L=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(E);L&&(E=L[1],y=L[3])}else y=n[3]?n[3].slice(1,-1):"";return E=E.trim(),/^</.test(E)&&(this.options.pedantic&&!/>$/.test(u)?E=E.slice(1):E=E.slice(1,-1)),ye(n,{href:E&&E.replace(this.rules.inline._escapes,"$1"),title:y&&y.replace(this.rules.inline._escapes,"$1")},n[0])}},s.reflink=function(e,n){var u;if((u=this.rules.inline.reflink.exec(e))||(u=this.rules.inline.nolink.exec(e))){var d=(u[2]||u[1]).replace(/\s+/g," ");if(d=n[d.toLowerCase()],!d||!d.href){var r=u[0].charAt(0);return{type:"text",raw:r,text:r}}return ye(u,d,u[0])}},s.emStrong=function(e,n,u){u===void 0&&(u="");var d=this.rules.inline.emStrong.lDelim.exec(e);if(!!d&&!(d[3]&&u.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var r=d[1]||d[2]||"";if(!r||r&&(u===""||this.rules.inline.punctuation.exec(u))){var g=d[0].length-1,v,E,y=g,L=0,P=d[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(P.lastIndex=0,n=n.slice(-1*e.length+g);(d=P.exec(n))!=null;)if(v=d[1]||d[2]||d[3]||d[4]||d[5]||d[6],!!v){if(E=v.length,d[3]||d[4]){y+=E;continue}else if((d[5]||d[6])&&g%3&&!((g+E)%3)){L+=E;continue}if(y-=E,!(y>0))return E=Math.min(E,E+y+L),Math.min(g,E)%2?{type:"em",raw:e.slice(0,g+d.index+E+1),text:e.slice(1,g+d.index+E)}:{type:"strong",raw:e.slice(0,g+d.index+E+1),text:e.slice(2,g+d.index+E-1)}}}}},s.codespan=function(e){var n=this.rules.inline.code.exec(e);if(n){var u=n[2].replace(/\n/g," "),d=/[^ ]/.test(u),r=/^ /.test(u)&&/ $/.test(u);return d&&r&&(u=u.substring(1,u.length-1)),u=te(u,!0),{type:"codespan",raw:n[0],text:u}}},s.br=function(e){var n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}},s.del=function(e){var n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2]}},s.autolink=function(e,n){var u=this.rules.inline.autolink.exec(e);if(u){var d,r;return u[2]==="@"?(d=te(this.options.mangle?n(u[1]):u[1]),r="mailto:"+d):(d=te(u[1]),r=d),{type:"link",raw:u[0],text:d,href:r,tokens:[{type:"text",raw:d,text:d}]}}},s.url=function(e,n){var u;if(u=this.rules.inline.url.exec(e)){var d,r;if(u[2]==="@")d=te(this.options.mangle?n(u[0]):u[0]),r="mailto:"+d;else{var g;do g=u[0],u[0]=this.rules.inline._backpedal.exec(u[0])[0];while(g!==u[0]);d=te(u[0]),u[1]==="www."?r="http://"+d:r=d}return{type:"link",raw:u[0],text:d,href:r,tokens:[{type:"text",raw:d,text:d}]}}},s.inlineText=function(e,n,u){var d=this.rules.inline.text.exec(e);if(d){var r;return n?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(d[0]):te(d[0]):d[0]:r=te(this.options.smartypants?u(d[0]):d[0]),{type:"text",raw:d[0],text:r}}},p}(),pe=W.noopTest,j=W.edit,Ce=W.merge,_={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:pe,table:pe,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};_._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,_.def=j(_.def).replace("label",_._label).replace("title",_._title).getRegex(),_.bullet=/(?:[*+-]|\d{1,9}[.)])/,_.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,_.item=j(_.item,"gm").replace(/bull/g,_.bullet).getRegex(),_.listItemStart=j(/^( *)(bull) */).replace("bull",_.bullet).getRegex(),_.list=j(_.list).replace(/bull/g,_.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+_.def.source+")").getRegex(),_._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,_.html=j(_.html,"i").replace("comment",_._comment).replace("tag",_._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_.paragraph=j(_._paragraph).replace("hr",_.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_._tag).getRegex(),_.blockquote=j(_.blockquote).replace("paragraph",_.paragraph).getRegex(),_.normal=Ce({},_),_.gfm=Ce({},_.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),_.gfm.nptable=j(_.gfm.nptable).replace("hr",_.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_._tag).getRegex(),_.gfm.table=j(_.gfm.table).replace("hr",_.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_._tag).getRegex(),_.pedantic=Ce({},_.normal,{html:j(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:pe,paragraph:j(_.normal._paragraph).replace("hr",_.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var B={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:pe,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:pe,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};B._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",B.punctuation=j(B.punctuation).replace(/punctuation/g,B._punctuation).getRegex(),B.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,B.escapedEmSt=/\\\*|\\_/g,B._comment=j(_._comment).replace("(?:-->|$)","-->").getRegex(),B.emStrong.lDelim=j(B.emStrong.lDelim).replace(/punct/g,B._punctuation).getRegex(),B.emStrong.rDelimAst=j(B.emStrong.rDelimAst,"g").replace(/punct/g,B._punctuation).getRegex(),B.emStrong.rDelimUnd=j(B.emStrong.rDelimUnd,"g").replace(/punct/g,B._punctuation).getRegex(),B._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,B._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,B._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,B.autolink=j(B.autolink).replace("scheme",B._scheme).replace("email",B._email).getRegex(),B._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,B.tag=j(B.tag).replace("comment",B._comment).replace("attribute",B._attribute).getRegex(),B._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,B._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,B._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,B.link=j(B.link).replace("label",B._label).replace("href",B._href).replace("title",B._title).getRegex(),B.reflink=j(B.reflink).replace("label",B._label).getRegex(),B.reflinkSearch=j(B.reflinkSearch,"g").replace("reflink",B.reflink).replace("nolink",B.nolink).getRegex(),B.normal=Ce({},B),B.pedantic=Ce({},B.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:j(/^!?\[(label)\]\((.*?)\)/).replace("label",B._label).getRegex(),reflink:j(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",B._label).getRegex()}),B.gfm=Ce({},B.normal,{escape:j(B.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),B.gfm.url=j(B.gfm.url,"i").replace("email",B.gfm._extended_email).getRegex(),B.breaks=Ce({},B.gfm,{br:j(B.br).replace("{2,}","*").getRegex(),text:j(B.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var dt={block:_,inline:B},Ht=we,Ut=a.exports.defaults,Ze=dt.block,$e=dt.inline,ft=W.repeatString;function Nt(p){return p.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function pt(p){var s="",f,e,n=p.length;for(f=0;f<n;f++)e=p.charCodeAt(f),Math.random()>.5&&(e="x"+e.toString(16)),s+="&#"+e+";";return s}var Vt=function(){function p(f){this.tokens=[],this.tokens.links=Object.create(null),this.options=f||Ut,this.options.tokenizer=this.options.tokenizer||new Ht,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var e={block:Ze.normal,inline:$e.normal};this.options.pedantic?(e.block=Ze.pedantic,e.inline=$e.pedantic):this.options.gfm&&(e.block=Ze.gfm,this.options.breaks?e.inline=$e.breaks:e.inline=$e.gfm),this.tokenizer.rules=e}p.lex=function(e,n){var u=new p(n);return u.lex(e)},p.lexInline=function(e,n){var u=new p(n);return u.inlineTokens(e)};var s=p.prototype;return s.lex=function(e){return e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},s.blockTokens=function(e,n,u){var d=this;n===void 0&&(n=[]),u===void 0&&(u=!0),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));for(var r,g,v,E,y,L;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(R){return(r=R.call(d,e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1}))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.type&&n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),E=n[n.length-1],E&&E.type==="paragraph"?(E.raw+=`
`+r.raw,E.text+=`
`+r.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.nptable(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],u),n.push(r);continue}if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),v=r.items.length,g=0;g<v;g++)r.items[g].tokens=this.blockTokens(r.items[g].text,[],!1);n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(u&&(r=this.tokenizer.def(e))){e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(y=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var R=1/0,S=e.slice(1),N=void 0;d.options.extensions.startBlock.forEach(function(V){N=V.call(this,S),typeof N=="number"&&N>=0&&(R=Math.min(R,N))}),R<1/0&&R>=0&&(y=e.substring(0,R+1))}(),u&&(r=this.tokenizer.paragraph(y))){E=n[n.length-1],L&&E.type==="paragraph"?(E.raw+=`
`+r.raw,E.text+=`
`+r.text):n.push(r),L=y.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),E=n[n.length-1],E&&E.type==="text"?(E.raw+=`
`+r.raw,E.text+=`
`+r.text):n.push(r);continue}if(e){var P="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(P);break}else throw new Error(P)}}return n},s.inline=function(e){var n,u,d,r,g,v,E=e.length;for(n=0;n<E;n++)switch(v=e[n],v.type){case"paragraph":case"text":case"heading":{v.tokens=[],this.inlineTokens(v.text,v.tokens);break}case"table":{for(v.tokens={header:[],cells:[]},r=v.header.length,u=0;u<r;u++)v.tokens.header[u]=[],this.inlineTokens(v.header[u],v.tokens.header[u]);for(r=v.cells.length,u=0;u<r;u++)for(g=v.cells[u],v.tokens.cells[u]=[],d=0;d<g.length;d++)v.tokens.cells[u][d]=[],this.inlineTokens(g[d],v.tokens.cells[u][d]);break}case"blockquote":{this.inline(v.tokens);break}case"list":{for(r=v.items.length,u=0;u<r;u++)this.inline(v.items[u].tokens);break}}return e},s.inlineTokens=function(e,n,u,d){var r=this;n===void 0&&(n=[]),u===void 0&&(u=!1),d===void 0&&(d=!1);var g,v,E,y=e,L,P,R;if(this.tokens.links){var S=Object.keys(this.tokens.links);if(S.length>0)for(;(L=this.tokenizer.rules.inline.reflinkSearch.exec(y))!=null;)S.includes(L[0].slice(L[0].lastIndexOf("[")+1,-1))&&(y=y.slice(0,L.index)+"["+ft("a",L[0].length-2)+"]"+y.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(L=this.tokenizer.rules.inline.blockSkip.exec(y))!=null;)y=y.slice(0,L.index)+"["+ft("a",L[0].length-2)+"]"+y.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(L=this.tokenizer.rules.inline.escapedEmSt.exec(y))!=null;)y=y.slice(0,L.index)+"++"+y.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(P||(R=""),P=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(V){return(g=V.call(r,e,n))?(e=e.substring(g.raw.length),n.push(g),!0):!1}))){if(g=this.tokenizer.escape(e)){e=e.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.tag(e,u,d)){e=e.substring(g.raw.length),u=g.inLink,d=g.inRawBlock,v=n[n.length-1],v&&g.type==="text"&&v.type==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(g=this.tokenizer.link(e)){e=e.substring(g.raw.length),g.type==="link"&&(g.tokens=this.inlineTokens(g.text,[],!0,d)),n.push(g);continue}if(g=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(g.raw.length),v=n[n.length-1],g.type==="link"?(g.tokens=this.inlineTokens(g.text,[],!0,d),n.push(g)):v&&g.type==="text"&&v.type==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(g=this.tokenizer.emStrong(e,y,R)){e=e.substring(g.raw.length),g.tokens=this.inlineTokens(g.text,[],u,d),n.push(g);continue}if(g=this.tokenizer.codespan(e)){e=e.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.br(e)){e=e.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.del(e)){e=e.substring(g.raw.length),g.tokens=this.inlineTokens(g.text,[],u,d),n.push(g);continue}if(g=this.tokenizer.autolink(e,pt)){e=e.substring(g.raw.length),n.push(g);continue}if(!u&&(g=this.tokenizer.url(e,pt))){e=e.substring(g.raw.length),n.push(g);continue}if(E=e,this.options.extensions&&this.options.extensions.startInline&&function(){var V=1/0,J=e.slice(1),ue=void 0;r.options.extensions.startInline.forEach(function(q){ue=q.call(this,J),typeof ue=="number"&&ue>=0&&(V=Math.min(V,ue))}),V<1/0&&V>=0&&(E=e.substring(0,V+1))}(),g=this.tokenizer.inlineText(E,d,Nt)){e=e.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(R=g.raw.slice(-1)),P=!0,v=n[n.length-1],v&&v.type==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(e){var N="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(N);break}else throw new Error(N)}}return n},h(p,null,[{key:"rules",get:function(){return{block:Ze,inline:$e}}}]),p}(),qt=a.exports.defaults,ht=W.cleanUrl,We=W.escape,gt=function(){function p(f){this.options=f||qt}var s=p.prototype;return s.code=function(e,n,u){var d=(n||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(e,d);r!=null&&r!==e&&(u=!0,e=r)}return e=e.replace(/\n$/,"")+`
`,d?'<pre><code class="'+this.options.langPrefix+We(d,!0)+'">'+(u?e:We(e,!0))+`</code></pre>
`:"<pre><code>"+(u?e:We(e,!0))+`</code></pre>
`},s.blockquote=function(e){return`<blockquote>
`+e+`</blockquote>
`},s.html=function(e){return e},s.heading=function(e,n,u,d){return this.options.headerIds?"<h"+n+' id="'+this.options.headerPrefix+d.slug(u)+'">'+e+"</h"+n+`>
`:"<h"+n+">"+e+"</h"+n+`>
`},s.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},s.list=function(e,n,u){var d=n?"ol":"ul",r=n&&u!==1?' start="'+u+'"':"";return"<"+d+r+`>
`+e+"</"+d+`>
`},s.listitem=function(e){return"<li>"+e+`</li>
`},s.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},s.paragraph=function(e){return"<p>"+e+`</p>
`},s.table=function(e,n){return n&&(n="<tbody>"+n+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`},s.tablerow=function(e){return`<tr>
`+e+`</tr>
`},s.tablecell=function(e,n){var u=n.header?"th":"td",d=n.align?"<"+u+' align="'+n.align+'">':"<"+u+">";return d+e+"</"+u+`>
`},s.strong=function(e){return"<strong>"+e+"</strong>"},s.em=function(e){return"<em>"+e+"</em>"},s.codespan=function(e){return"<code>"+e+"</code>"},s.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.del=function(e){return"<del>"+e+"</del>"},s.link=function(e,n,u){if(e=ht(this.options.sanitize,this.options.baseUrl,e),e===null)return u;var d='<a href="'+We(e)+'"';return n&&(d+=' title="'+n+'"'),d+=">"+u+"</a>",d},s.image=function(e,n,u){if(e=ht(this.options.sanitize,this.options.baseUrl,e),e===null)return u;var d='<img src="'+e+'" alt="'+u+'"';return n&&(d+=' title="'+n+'"'),d+=this.options.xhtml?"/>":">",d},s.text=function(e){return e},p}(),Dt=function(){function p(){}var s=p.prototype;return s.strong=function(e){return e},s.em=function(e){return e},s.codespan=function(e){return e},s.del=function(e){return e},s.html=function(e){return e},s.text=function(e){return e},s.link=function(e,n,u){return""+u},s.image=function(e,n,u){return""+u},s.br=function(){return""},p}(),vt=function(){function p(){this.seen={}}var s=p.prototype;return s.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},s.getNextSafeSlug=function(e,n){var u=e,d=0;if(this.seen.hasOwnProperty(u)){d=this.seen[e];do d++,u=e+"-"+d;while(this.seen.hasOwnProperty(u))}return n||(this.seen[e]=d,this.seen[u]=0),u},s.slug=function(e,n){n===void 0&&(n={});var u=this.serialize(e);return this.getNextSafeSlug(u,n.dryrun)},p}(),Kt=gt,Mt=Dt,Zt=vt,Wt=a.exports.defaults,Jt=W.unescape,Gt=function(){function p(f){this.options=f||Wt,this.options.renderer=this.options.renderer||new Kt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Mt,this.slugger=new Zt}p.parse=function(e,n){var u=new p(n);return u.parse(e)},p.parseInline=function(e,n){var u=new p(n);return u.parseInline(e)};var s=p.prototype;return s.parse=function(e,n){n===void 0&&(n=!0);var u="",d,r,g,v,E,y,L,P,R,S,N,V,J,ue,q,M,Et,Se,ut,kt=e.length;for(d=0;d<kt;d++){if(S=e[d],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[S.type]&&(ut=this.options.extensions.renderers[S.type].call(this,S),ut!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(S.type))){u+=ut||"";continue}switch(S.type){case"space":continue;case"hr":{u+=this.renderer.hr();continue}case"heading":{u+=this.renderer.heading(this.parseInline(S.tokens),S.depth,Jt(this.parseInline(S.tokens,this.textRenderer)),this.slugger);continue}case"code":{u+=this.renderer.code(S.text,S.lang,S.escaped);continue}case"table":{for(P="",L="",v=S.header.length,r=0;r<v;r++)L+=this.renderer.tablecell(this.parseInline(S.tokens.header[r]),{header:!0,align:S.align[r]});for(P+=this.renderer.tablerow(L),R="",v=S.cells.length,r=0;r<v;r++){for(y=S.tokens.cells[r],L="",E=y.length,g=0;g<E;g++)L+=this.renderer.tablecell(this.parseInline(y[g]),{header:!1,align:S.align[g]});R+=this.renderer.tablerow(L)}u+=this.renderer.table(P,R);continue}case"blockquote":{R=this.parse(S.tokens),u+=this.renderer.blockquote(R);continue}case"list":{for(N=S.ordered,V=S.start,J=S.loose,v=S.items.length,R="",r=0;r<v;r++)q=S.items[r],M=q.checked,Et=q.task,ue="",q.task&&(Se=this.renderer.checkbox(M),J?q.tokens.length>0&&q.tokens[0].type==="text"?(q.tokens[0].text=Se+" "+q.tokens[0].text,q.tokens[0].tokens&&q.tokens[0].tokens.length>0&&q.tokens[0].tokens[0].type==="text"&&(q.tokens[0].tokens[0].text=Se+" "+q.tokens[0].tokens[0].text)):q.tokens.unshift({type:"text",text:Se}):ue+=Se),ue+=this.parse(q.tokens,J),R+=this.renderer.listitem(ue,Et,M);u+=this.renderer.list(R,N,V);continue}case"html":{u+=this.renderer.html(S.text);continue}case"paragraph":{u+=this.renderer.paragraph(this.parseInline(S.tokens));continue}case"text":{for(R=S.tokens?this.parseInline(S.tokens):S.text;d+1<kt&&e[d+1].type==="text";)S=e[++d],R+=`
`+(S.tokens?this.parseInline(S.tokens):S.text);u+=n?this.renderer.paragraph(R):R;continue}default:{var At='Token with "'+S.type+'" type was not found.';if(this.options.silent){console.error(At);return}else throw new Error(At)}}}return u},s.parseInline=function(e,n){n=n||this.renderer;var u="",d,r,g,v=e.length;for(d=0;d<v;d++){if(r=e[d],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(g=this.options.extensions.renderers[r.type].call(this,r),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){u+=g||"";continue}switch(r.type){case"escape":{u+=n.text(r.text);break}case"html":{u+=n.html(r.text);break}case"link":{u+=n.link(r.href,r.title,this.parseInline(r.tokens,n));break}case"image":{u+=n.image(r.href,r.title,r.text);break}case"strong":{u+=n.strong(this.parseInline(r.tokens,n));break}case"em":{u+=n.em(this.parseInline(r.tokens,n));break}case"codespan":{u+=n.codespan(r.text);break}case"br":{u+=n.br();break}case"del":{u+=n.del(this.parseInline(r.tokens,n));break}case"text":{u+=n.text(r.text);break}default:{var E='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(E);return}else throw new Error(E)}}}return u},p}(),xe=Vt,Be=Gt,mt=we,bt=gt,Xt=Dt,Yt=vt,Je=W.merge,Ct=W.checkSanitizeDeprecation,Ft=W.escape,Qt=a.exports.getDefaults,en=a.exports.changeDefaults,tn=a.exports.defaults;function z(p,s,f){if(typeof p=="undefined"||p===null)throw new Error("marked(): input parameter is undefined or null");if(typeof p!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(p)+", string expected");if(typeof s=="function"&&(f=s,s=null),s=Je({},z.defaults,s||{}),Ct(s),f){var e=s.highlight,n;try{n=xe.lex(p,s)}catch(g){return f(g)}var u=function(v){var E;if(!v)try{s.walkTokens&&z.walkTokens(n,s.walkTokens),E=Be.parse(n,s)}catch(y){v=y}return s.highlight=e,v?f(v):f(null,E)};if(!e||e.length<3||(delete s.highlight,!n.length))return u();var d=0;z.walkTokens(n,function(g){g.type==="code"&&(d++,setTimeout(function(){e(g.text,g.lang,function(v,E){if(v)return u(v);E!=null&&E!==g.text&&(g.text=E,g.escaped=!0),d--,d===0&&u()})},0))}),d===0&&u();return}try{var r=xe.lex(p,s);return s.walkTokens&&z.walkTokens(r,s.walkTokens),Be.parse(r,s)}catch(g){if(g.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+Ft(g.message+"",!0)+"</pre>";throw g}}z.options=z.setOptions=function(p){return Je(z.defaults,p),en(z.defaults),z},z.getDefaults=Qt,z.defaults=tn,z.use=function(){for(var p=this,s=arguments.length,f=new Array(s),e=0;e<s;e++)f[e]=arguments[e];var n=Je.apply(void 0,[{}].concat(f)),u=z.defaults.extensions||{renderers:{},childTokens:{}},d;f.forEach(function(r){if(r.extensions&&(d=!0,r.extensions.forEach(function(v){if(!v.name)throw new Error("extension name required");if(v.renderer){var E=u.renderers?u.renderers[v.name]:null;E?u.renderers[v.name]=function(){for(var y=arguments.length,L=new Array(y),P=0;P<y;P++)L[P]=arguments[P];var R=v.renderer.apply(this,L);return R===!1&&(R=E.apply(this,L)),R}:u.renderers[v.name]=v.renderer}if(v.tokenizer){if(!v.level||v.level!=="block"&&v.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");u[v.level]?u[v.level].unshift(v.tokenizer):u[v.level]=[v.tokenizer],v.start&&(v.level==="block"?u.startBlock?u.startBlock.push(v.start):u.startBlock=[v.start]:v.level==="inline"&&(u.startInline?u.startInline.push(v.start):u.startInline=[v.start]))}v.childTokens&&(u.childTokens[v.name]=v.childTokens)})),r.renderer&&function(){var v=z.defaults.renderer||new bt,E=function(P){var R=v[P];v[P]=function(){for(var S=arguments.length,N=new Array(S),V=0;V<S;V++)N[V]=arguments[V];var J=r.renderer[P].apply(v,N);return J===!1&&(J=R.apply(v,N)),J}};for(var y in r.renderer)E(y);n.renderer=v}(),r.tokenizer&&function(){var v=z.defaults.tokenizer||new mt,E=function(P){var R=v[P];v[P]=function(){for(var S=arguments.length,N=new Array(S),V=0;V<S;V++)N[V]=arguments[V];var J=r.tokenizer[P].apply(v,N);return J===!1&&(J=R.apply(v,N)),J}};for(var y in r.tokenizer)E(y);n.tokenizer=v}(),r.walkTokens){var g=z.defaults.walkTokens;n.walkTokens=function(v){r.walkTokens.call(p,v),g&&g(v)}}d&&(n.extensions=u),z.setOptions(n)})},z.walkTokens=function(p,s){for(var f=function(){var d=n.value;switch(s(d),d.type){case"table":{for(var r=o(d.tokens.header),g;!(g=r()).done;){var v=g.value;z.walkTokens(v,s)}for(var E=o(d.tokens.cells),y;!(y=E()).done;)for(var L=y.value,P=o(L),R;!(R=P()).done;){var S=R.value;z.walkTokens(S,s)}break}case"list":{z.walkTokens(d.items,s);break}default:z.defaults.extensions&&z.defaults.extensions.childTokens&&z.defaults.extensions.childTokens[d.type]?z.defaults.extensions.childTokens[d.type].forEach(function(N){z.walkTokens(d[N],s)}):d.tokens&&z.walkTokens(d.tokens,s)}},e=o(p),n;!(n=e()).done;)f()},z.parseInline=function(p,s){if(typeof p=="undefined"||p===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof p!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(p)+", string expected");s=Je({},z.defaults,s||{}),Ct(s);try{var f=xe.lexInline(p,s);return s.walkTokens&&z.walkTokens(f,s.walkTokens),Be.parseInline(f,s)}catch(e){if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+Ft(e.message+"",!0)+"</pre>";throw e}},z.Parser=Be,z.parser=Be.parse,z.Renderer=bt,z.TextRenderer=Xt,z.Lexer=xe,z.lexer=xe.lex,z.Tokenizer=mt,z.Slugger=Yt,z.parse=z;var nn=z;return nn})})(Ot);var ze=Ot.exports,Mn=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var l=document.activeElement,i=[],h=0;h<t.rangeCount;h++)i.push(t.getRangeAt(h));switch(l.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":l.blur();break;default:l=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||i.forEach(function(b){t.addRange(b)}),l&&l.focus()}},Zn=Mn,Pt={"text/plain":"Text","text/html":"Url",default:"Text"},Wn="Copy to clipboard: #{key}, Enter";function Jn(t){var l=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,l)}function Gn(t,l){var i,h,b,C,o,a,D=!1;l||(l={}),i=l.debug||!1;try{b=Zn(),C=document.createRange(),o=document.getSelection(),a=document.createElement("span"),a.textContent=t,a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(w){if(w.stopPropagation(),l.format)if(w.preventDefault(),typeof w.clipboardData=="undefined"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var A=Pt[l.format]||Pt.default;window.clipboardData.setData(A,t)}else w.clipboardData.clearData(),w.clipboardData.setData(l.format,t);l.onCopy&&(w.preventDefault(),l.onCopy(w.clipboardData))}),document.body.appendChild(a),C.selectNodeContents(a),o.addRange(C);var k=document.execCommand("copy");if(!k)throw new Error("copy command was unsuccessful");D=!0}catch(w){i&&console.error("unable to copy using execCommand: ",w),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(l.format||"text",t),l.onCopy&&l.onCopy(window.clipboardData),D=!0}catch(A){i&&console.error("unable to copy using clipboardData: ",A),i&&console.error("falling back to prompt"),h=Jn("message"in l?l.message:Wn),window.prompt(h,t)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(C):o.removeAllRanges()),a&&document.body.removeChild(a),b()}return D}var Le=Gn;const je=t=>{const l=t.value,i=l.substring(0,t.selectionStart),h=l.substring(t.selectionEnd,l.length),b=i.lastIndexOf(`
`),C=i.substring(0,b+1),o=h.indexOf(`
`),a=h.substring(o===-1?h.length:o,h.length),D=i.substring(b+1,i.length),k=h.substring(0,o);return{prefixStr:i,subfixStr:h,prefixStrEndRow:C,subfixStrEndRow:a,prefixSupply:D,subfixSupply:k}},Xn=(t,l="",i,h)=>{var b,C;let o="",a=0,D=0,k=!1,w,A;if(/^h[1-6]{1}$/.test(t)){const $=t.replace(/^h(\d)/,(x,F)=>new Array(Number(F)).fill("#",0,F).join(""));o=`${$} ${l}`,a=$.length+1}else{if(t==="prettier")return window.prettier.format(i.value,{parser:"markdown",plugins:window.prettierPlugins});switch(t){case"bold":{o=`**${l}**`,a=2,D=-2;break}case"underline":{o=`<u>${l}</u>`,a=3,D=-4;break}case"italic":{o=`*${l}*`,a=1,D=-1;break}case"strikeThrough":{o=`~${l}~`,a=1,D=-1;break}case"sub":{o=`<sub>${l}</sub>`,a=5,D=-6;break}case"sup":{o=`<sup>${l}</sup>`,a=5,D=-6;break}case"codeRow":{o="`"+l+"`",a=1,D=-1;break}case"quote":{o=`> ${l}`,a=2;break}case"orderedList":{o=`1. ${l}`,a=3;break}case"unorderedList":{o=`- ${l}`,a=2;break}case"code":{o="```language\n"+l+"\n```\n",a=3,D=11-o.length,k=!0;break}case"table":{o=`| \u8868\u5934 | \u8868\u5934 |
| - | - |
| \u5185\u5BB9 | \u5185\u5BB9 |
`,a=2,D=4-o.length,k=!0;break}case"link":{const{desc:$,url:x}=h;o=`[${$}](${x})`;break}case"image":{const{desc:$,url:x}=h;o=`![${$}](${x})
`;break}case"tab":{l=((b=window.getSelection())==null?void 0:b.toString())||"";const{tabWidth:$=2}=h,x=new Array($).fill(" ").join("");if(l==="")o=x;else if(/\n/.test(l)){const{prefixStr:F,subfixStr:T,prefixSupply:O,subfixSupply:U}=je(i);o=`${O}${l}${U}`.split(`
`).map(Z=>`${x}${Z}`).join(`
`),w=F.substring(0,F.length-O.length),A=T.substring(U.length,T.length),k=!0,a=$,D=-O.length-U.length}else{const T=i.value.substring(0,i.selectionStart);/\n$/.test(T)||T===""?(o=`${x}${l}`,k=!0):o=x}break}case"shiftTab":{l=((C=window.getSelection())==null?void 0:C.toString())||"";const{tabWidth:$=2}=h,{prefixStr:x,prefixStrEndRow:F,subfixStrEndRow:T,prefixSupply:O,subfixSupply:U}=je(i),H=new RegExp(`^\\s{${$}}`),X=(Z=!1,le=!1)=>{const Y=`${O}${l}${U}`;if(H.test(Y)){const Q=x.length-(le?0:$),ne=Z?Q+l.length-$:Q;return ce(i,Q,ne),`${F}${Y.replace(H,"")}${T}`}else if(/^\s/.test(Y)){const Q=Y.replace(/^\s/,""),ne=Y.length-Q.length,ee=i.selectionStart-(le?0:ne),fe=Z?ee+l.length-ne:ee;return ce(i,ee,fe),`${F}${Q}${T}`}else o=l};if(l===""){const Z=X();if(Z)return Z}else if(/\n/.test(l)){const le=`${O}${l}${U}`.split(`
`);let[Y,Q]=[0,0];const ne=le.map((ee,fe)=>{if(H.test(ee))return fe===0&&(Y=$),Q+=$,ee.replace(H,"");if(/^\s/.test(ee)){const ve=ee.replace(/^\s/,"");return Q+=ee.length-ve.length,ve}return ee}).join(`
`);return ce(i,i.selectionStart-Y,i.selectionEnd-Q),`${F}${ne}${T}`}else{const Z=X(!0,!0);if(Z)return Z}break}case"ctrlC":{const{prefixSupply:$,subfixSupply:x}=je(i);return Le(l===""?`${$}${x}`:l),i.value}case"ctrlX":{const{prefixStrEndRow:$,subfixStrEndRow:x,prefixStr:F,subfixStr:T,prefixSupply:O,subfixSupply:U}=je(i);return l===""?(Le(`${O}${U}`),ce(i,$.length),`${$}${x.replace(/^\n/,"")}`):(Le(l),ce(i,F.length),`${F}${T}`)}case"ctrlD":{const{prefixStrEndRow:$,subfixStrEndRow:x}=je(i);return ce(i,$.length),`${$}${x.replace(/^\n/,"")}`}}}return rt(i,o,{deviationStart:a,deviationEnd:D,select:k,prefixVal:w,subfixVal:A})},Yn=(t,l)=>{var i,h;const b=K("historyLength"),C=K("editorId");let o=-1;const a={list:[{content:t.value,startPos:((i=l.value)==null?void 0:i.selectionStart)||0,endPos:((h=l.value)==null?void 0:h.selectionEnd)||0}],userUpdated:!0,curr:0};ie(()=>t.value,D=>{var k,w;clearTimeout(o);const A=((k=l.value)==null?void 0:k.selectionStart)||0,$=((w=l.value)==null?void 0:w.selectionEnd)||0;o=setTimeout(()=>{if(a.userUpdated){a.curr<a.list.length-1&&(a.list=a.list.slice(0,a.curr+1)),a.list.length>b&&a.list.shift();const x=a.list.pop();x.startPos=A,x.endPos=$,Array.prototype.push.call(a.list,x,{content:D,startPos:A,endPos:$}),a.curr=a.list.length-1}else a.userUpdated=!0},10)}),I.on(C,{name:"ctrlZ",callback(){a.userUpdated=!1,a.curr=a.curr-1<0?0:a.curr-1;const D=a.list[a.curr];t.onChange(D.content),ce(l.value,D.startPos,D.endPos)}}),I.on(C,{name:"ctrlShiftZ",callback(){a.userUpdated=!1,a.curr=a.curr+1===a.list.length?a.curr:a.curr+1;const D=a.list[a.curr];t.onChange(D.content),ce(l.value,D.startPos,D.endPos)}})},Qn=t=>{const l=K("showCodeRowNumber"),i=G(!1);let h=[];const b=new ze.Renderer;b.heading=(...a)=>{const[D,k]=a;return h.push({text:D,level:k}),t.markedHeading(...a)},b.image=(a,D,k)=>`<figure><img src="${a}" alt="${k}"><figcaption>${k}</figcaption></figure>`,ze.setOptions({renderer:b}),t.hljs&&ze.setOptions({highlight:a=>{const D=t.hljs.highlightAuto(a).value;return l?Lt(D):`<span class="code-block">${D}</span>`}});const C=Fe(()=>{h=[];const a=ze(t.value);return i.value,a}),o=()=>{ze.setOptions({highlight:a=>{const D=window.hljs.highlightAuto(a).value;return l?Lt(D):`<span class="code-block">${D}</span>`}}),i.value=!0};return ie(()=>C.value,a=>{t.onHtmlChanged(a),t.onGetCatalog(h)}),{html:C,highlightLoad:o}},eu=(t,l,i,h,b)=>{const C=K("previewOnly"),o=K("usedLanguageText"),a=K("editorId");let D=()=>{};const k=()=>{document.querySelectorAll(`#${a} .${m}-preview pre`).forEach(A=>{var $;const x=document.createElement("span");x.setAttribute("class","copy-button"),x.innerText=(($=o.value.copyCode)==null?void 0:$.text)||"\u590D\u5236\u4EE3\u7801",x.addEventListener("click",()=>{var F;Le(A.querySelector("code").innerText),x.innerText=((F=o.value.copyCode)==null?void 0:F.tips)||"\u5DF2\u590D\u5236\uFF01",setTimeout(()=>{var T;x.innerText=((T=o.value.copyCode)==null?void 0:T.text)||"\u590D\u5236\u4EE3\u7801"},1500)}),A.appendChild(x)})},w=()=>{Ie(()=>{t.setting.preview&&!C&&(D=zt(i.value,h.value||b.value)),k()})};ie(()=>l.value,w),ie(()=>t.setting.preview,A=>{A&&!C?Ie(()=>{D=zt(i.value,h.value||b.value)}):D()}),ae(w)},tu=(t,l)=>{const i=K("previewOnly"),h=K("tabWidth"),b=K("editorId"),C=G("");return ae(()=>{var o,a;i||((o=l.value)==null||o.addEventListener("select",()=>{var D;C.value=((D=window.getSelection())==null?void 0:D.toString())||""}),(a=l.value)==null||a.addEventListener("keypress",D=>{var k,w,A;if(D.key==="Enter"){const $=(k=l.value)==null?void 0:k.selectionStart,x=(w=l.value)==null?void 0:w.value.substring(0,$),F=(A=l.value)==null?void 0:A.value.substring($),T=x==null?void 0:x.lastIndexOf(`
`),O=x==null?void 0:x.substring(T+1,$);if(/^\d+\.\s|^-\s/.test(O))if(D.cancelBubble=!0,D.preventDefault(),D.stopPropagation(),/^\d+\.\s+$|^-\s+$/.test(O)){const U=x==null?void 0:x.replace(new RegExp(O+"$"),"");t.onChange(U+F),ce(l.value,U==null?void 0:U.length)}else if(/^-\s+.+/.test(O))t.onChange(rt(l.value,`
- `,{}));else{const U=O==null?void 0:O.match(/\d+(?=\.)/),H=U&&Number(U[0])+1||1;t.onChange(rt(l.value,`
${H}. `,{}))}}}),I.on(b,{name:"replace",callback(D,k={}){t.onChange(Xn(D,C.value,l.value,it(Re({},k),{tabWidth:h})))}}))}),I.on(b,{name:"selectTextChange",callback(o){C.value=o}}),{selectedText:C}};var nu=re({name:"MDEditorContent",props:{value:{type:String,default:""},hljs:{type:Object,default:null},onChange:{type:Function,default:()=>()=>{}},setting:{type:Object,default:()=>({})},onHtmlChanged:{type:Function,default:()=>()=>{}},onGetCatalog:{type:Function,default:()=>()=>{}},markedHeading:{type:Function,default:()=>(t,l)=>`<h${l} id="${t}"><a href="#${t}">${t}</a></h${l}>`}},setup(t){const l=K("highlight"),i=K("previewOnly"),h=K("showCodeRowNumber"),b=K("previewTheme"),C=K("editorId"),o=G(),a=G(),D=G(),{html:k,highlightLoad:w}=Qn(t);eu(t,k,o,a,D);const{selectedText:A}=tu(t,o);return!i&&Yn(t,o),()=>c(_e,null,[c("div",{class:[`${m}-content`]},[!i&&c("div",{class:[`${m}-input-wrapper`]},[c("textarea",{id:`${C}-textarea`,ref:o,value:t.value,onInput:$=>{A.value="",t.onChange($.target.value)},class:[t.setting.preview||t.setting.htmlPreview?"":"textarea-only"]},null)]),t.setting.preview&&c("div",{ref:a,class:[`${m}-preview`,`${b==null?void 0:b.value}-theme`,h&&`${m}-scrn`],innerHTML:k.value},null),t.setting.htmlPreview&&c(_e,null,[c("div",{ref:D,class:`${m}-html`},[k.value])])]),t.hljs===null&&c(Te,{to:"head"},{default:()=>[c("link",{rel:"stylesheet",href:l.value.css},null),c("script",{src:l.value.js,onLoad:w},null)]})])}});const m="md",uu={modelValue:{type:String,default:""},theme:{type:String,default:"light"},editorClass:{type:String,default:""},hljs:{type:Object,default:null},highlightJs:{type:String,default:et.js},highlightCss:{type:String,default:""},historyLength:{type:Number,default:10},onChange:{type:Function},onSave:{type:Function},onUploadImg:{type:Function},pageFullScreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},language:{type:String,default:"zh-CN"},languageUserDefined:{type:Object,default:()=>({})},toolbars:{type:Array,default:Tn},toolbarsExclude:{type:Array,default:[]},prettier:{type:Boolean,default:!0},prettierCDN:{type:String,default:_t.main},prettierMDCDN:{type:String,default:_t.markdown},onHtmlChanged:{type:Function},Cropper:{type:Function,default:null},cropperCss:{type:String,default:Tt.css},cropperJs:{type:String,default:Tt.js},iconfontJs:{type:String,default:Sn},onGetCatalog:{type:Function},editorId:{type:String,default:()=>`mev-${Math.random().toString(36).substr(3)}`},tabWidth:{type:Number,default:2},showCodeRowNumber:{type:Boolean,default:!1},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:_n},previewTheme:{type:String,default:"default"},markedHeading:{type:Function,default:(t,l)=>`<h${l} id="${t}"><a href="#${t}">${t}</a></h${l}>`}};var nt=re({name:"MdEditorV3",props:uu,setup(t,l){const{hljs:i,previewOnly:h,iconfontJs:b,prettier:C,prettierCDN:o,prettierMDCDN:a,Cropper:D,cropperCss:k,cropperJs:w,editorId:A,screenfull:$,screenfullJs:x}=t;Rn(t,l),zn(t),!h&&I.on(A,{name:"uploadImage",callback(H,X){const Z=le=>{le.forEach(Y=>{setTimeout(()=>{I.emit(A,"replace","image",{desc:"",url:Y})},0)}),X&&X()};t.onUploadImg?t.onUploadImg(H,Z):l.emit("onUploadImg",H,Z)}});const F=he({pageFullScreen:t.pageFullScreen,fullscreen:!1,preview:t.preview,htmlPreview:t.preview?!1:t.htmlPreview}),T=(H,X)=>{F[X]=H,X==="preview"&&F.preview?F.htmlPreview=!1:X==="htmlPreview"&&F.htmlPreview&&(F.preview=!1)};let O="";const U=()=>{F.pageFullScreen||F.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=O};return ie(()=>[F.pageFullScreen,F.fullscreen],U),ae(()=>{O=document.body.style.overflow,U()}),Ge(()=>{I.clear(A)}),()=>c("div",{id:A,class:[m,t.editorClass,t.theme==="dark"&&`${m}-dark`,F.fullscreen||F.pageFullScreen?`${m}-fullscreen`:"",h&&`${m}-previewOnly`]},[!h&&c(qn,{screenfull:$,screenfullJs:x,toolbars:t.toolbars,toolbarsExclude:t.toolbarsExclude,setting:F,updateSetting:T},null),c(nu,{hljs:i,value:t.modelValue,onChange:H=>{t.onChange?t.onChange(H):l.emit("update:modelValue",H)},setting:F,onHtmlChanged:H=>{t.onHtmlChanged?t.onHtmlChanged(H):l.emit("onHtmlChanged",H)},onGetCatalog:H=>{t.onGetCatalog?t.onGetCatalog(H):l.emit("onGetCatalog",H)},markedHeading:t.markedHeading},null),!h&&c(Te,{to:"head"},{default:()=>[c("script",{src:b},null)]}),C&&!h&&c(Te,{to:"head"},{default:()=>[c("script",{src:o},null),c("script",{src:a},null)]}),!h&&D===null&&c(Te,{to:"head"},{default:()=>[c("link",{href:k,rel:"stylesheet"},null),c("script",{src:w},null)]})])}});nt.install=t=>(t.component(nt.name,nt),t);const at="CURRENT_EDIT_ARTICLE",st="CURRENT_EDIT_ARTICLE_dec",ot="CURRENT_EDIT_ARTICLE_tag",ct="CURRENT_EDIT_ARTICLE_title",lu=re({name:"EditorPage",components:{MdEditor:nt},props:{articleID:{articleID:String,required:!0},callBack:{callBack:Function,required:!0}},methods:{httpString(t){var l=/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g;return t=t.match(l),t},async saveArticles(){if(this.BasicInformationArticle.name==null||this.BasicInformationArticle.name==""){Ee.info("\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898");return}if(this.BasicInformationArticle.dec==null||this.BasicInformationArticle.dec==""){Ee.info("\u8BF7\u8F93\u5165\u6587\u7AE0\u63CF\u8FF0");return}let t="",l=this.value.match(/!\[(.*?)\]\((.*?)\)/);l!=null&&l.length>0&&(t=l[0]);try{t=this.httpString(t)[0]}catch{}let i=[];this.tags.forEach(o=>{i.push({name:o.name,id:o.id!=null?o.id:o._id.$oid})});let h={title:this.BasicInformationArticle.name,describe:this.BasicInformationArticle.dec,cover_pic:t,content:this.value,tags:i};this.$props.articleID!=null&&this.$props.articleID!="0"&&(h.id=this.$props.articleID),(await bn(h)).data.code==0&&(localStorage.setItem(at,""),localStorage.setItem(ct,""),localStorage.setItem(st,""),localStorage.setItem(ot,"[]"),Ee.success("\u4FDD\u5B58\u6210\u529F"),this.$props.callBack(this.$props.articleID!=null&&this.$props.articleID!="0"?this.$props.articleID:""))},async oninputChange(){if(!this.seaching){this.seaching=!0,this.visible=!0;const l=(await Cn(this.inputValue)).data;l.code==0&&(this.searchTagList=l.data),this.seaching=!1}},handleClose(t){this.tags.splice(this.tags.indexOf(t),1)},handleSelectTag(t){let l=!1;if(this.tags.forEach(i=>{i.name==t.name&&(l=!0)}),l){Ee.info("\u4E0D\u53EF\u91CD\u590D\u6DFB\u52A0");return}this.tags.push(t)},handleInputConfirm(){let t=this.inputValue;t&&(this.newTagName=t,this.addTag()),this.inputVisible=!1,this.inputValue=""},showInput(){this.inputVisible=!0,this.$nextTick(t=>{this.$refs.saveTagInput.$refs.input.focus()})},async addTag(){if(this.newTagName==null||this.newTagName=="")return;const l=(await Fn(this.newTagName)).data;l.code==0?(this.visible=!1,this.tags.push(l.data)):Ee.error(l.msg),this.newTagName=""},Save(t){localStorage.setItem(at,t),localStorage.setItem(ct,this.BasicInformationArticle.name),localStorage.setItem(st,this.BasicInformationArticle.dec),localStorage.setItem(ot,JSON.stringify(this.tags))},async onUploadImg(t,l){const i=await Promise.all(Array.from(t).map(h=>new Promise((b,C)=>{let o=gn();const a=h.webkitRelativePath||h.name;let D={Bucket:Dn,Region:vn,Key:o+"-"+a,Body:h};this.cos.uploadFiles({files:[D],SliceSize:1024*1024*10,onProgress:function(k){var w=parseInt(String(k.percent*1e4))/100,A=parseInt(String(k.speed/1024/1024*100))/100;console.log("\u8FDB\u5EA6\uFF1A"+w+"%; \u901F\u5EA6\uFF1A"+A+"Mb/s;")},onFileFinish:function(k,w,A){console.log(A.Key+"\u4E0A\u4F20"+(k?"\u5931\u8D25":"\u5B8C\u6210"))}},(k,w)=>{if(k!=null||k!=null){console.log("\u4E0A\u4F20\u5931\u8D25",k),C(k);return}b("https://"+w.files[0].data.Location)})})));l(i.map(h=>h))}},data(){return{value:"",cos:null,tags:[],inputVisible:!1,visible:!1,seaching:!1,ref:null,inputValue:"",newTagName:"",BasicInformationArticle:{name:"",dec:""},searchTagList:[]}},setup:(t,l)=>{let i=he({value:"",cos:null,tags:[],inputVisible:!1,visible:!1,seaching:!1,inputValue:"",newTagName:"",show:!0,ref:null,BasicInformationArticle:{name:"",dec:""},searchTagList:[]});return ae(async()=>{let h=localStorage.getItem(at);h!=null&&h!=""&&(i.value=h);let b=localStorage.getItem(ct);b!=null&&b!=""&&(i.BasicInformationArticle.name=b);let C=localStorage.getItem(st);C!=null&&C!=""&&(i.BasicInformationArticle.dec=b);let o=localStorage.getItem(ot);if(o!=null&&o!=""&&o!="[]"&&(i.tags=JSON.parse(o)),t.articleID!=null&&t.articleID!="0"){const w=(await En(t.articleID)).data;w.code==0?(i.value=w.data.content,i.tags=w.data.tags,i.BasicInformationArticle.dec=w.data.describe,i.BasicInformationArticle.name=w.data.title):Ee.error(w.msg)}const D=(await kn()).data;D.code==0&&(i.cos=new COS({SecretId:D.data.secret_id,SecretKey:D.data.secret_key}))}),on(async()=>{}),$t({},cn(i))}}),iu=t=>(pn("data-v-4c7e3015"),t=t(),hn(),t),ru={style:{width:"400px","margin-top":"22px","padding-left":"22px",float:"left"}},au={style:{float:"left",width:"600px",height:"120px",overflow:"scroll","padding-bottom":"22px"}},su={style:{position:"relative"}},ou={style:{position:"absolute",width:"80px",height:"30px",left:"10px",top:"10px"}},cu=iu(()=>se("div",{style:{height:"32px"}},null,-1)),du={key:0},fu={style:{position:"absolute"}},pu=Qe("+ \u6DFB\u52A0tag"),hu={style:{float:"right"}},gu=Qe("\u4FDD\u5B58\u53D1\u5E03"),Du={style:{height:"100%"}};function vu(t,l,i,h,b,C){const o=ge("el-input"),a=ge("el-form-item"),D=ge("el-form"),k=ge("el-tag"),w=ge("el-popover"),A=ge("el-button"),$=ge("el-row"),x=ge("md-editor");return De(),Xe("div",null,[se("div",null,[se("div",ru,[c(D,{"label-position":"left","label-width":"80px",model:t.BasicInformationArticle},{default:oe(()=>[c(a,{label:"\u6807\u9898"},{default:oe(()=>[c(o,{modelValue:t.BasicInformationArticle.name,"onUpdate:modelValue":l[0]||(l[0]=F=>t.BasicInformationArticle.name=F)},null,8,["modelValue"])]),_:1}),c(a,{label:"\u63CF\u8FF0"},{default:oe(()=>[c(o,{modelValue:t.BasicInformationArticle.dec,"onUpdate:modelValue":l[1]||(l[1]=F=>t.BasicInformationArticle.dec=F)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),se("div",au,[c($,{style:{"padding-left":"8px"}},{default:oe(()=>[(De(!0),Xe(_e,null,xt(t.tags,F=>(De(),Ye(k,{key:F,closable:"","disable-transitions":!1,onClose:T=>t.handleClose(F),class:"tagsitem"},{default:oe(()=>[Qe(Bt(F.name),1)]),_:2},1032,["onClose"]))),128)),se("div",su,[se("div",ou,[c(w,{placement:"bottom",width:400,visible:t.visible,"onUpdate:visible":l[2]||(l[2]=F=>t.visible=F)},{reference:oe(()=>[cu]),default:oe(()=>[se("div",null,[(De(!0),Xe(_e,null,xt(t.searchTagList,F=>(De(),Ye(k,{key:F,"disable-transitions":!1,class:"tagsitem searchTag",onClick:T=>t.handleSelectTag(F)},{default:oe(()=>[Qe(Bt(F.name),1)]),_:2},1032,["onClick"]))),128)),t.searchTagList.length==0?(De(),Xe("div",du," \u6682\u65E0\u76F8\u5173tag \u56DE\u8F66\u521B\u5EFAtag ")):dn("",!0)])]),_:1},8,["visible"])]),se("div",fu,[t.inputVisible?(De(),Ye(o,{key:0,class:"input-new-tag",modelValue:t.inputValue,"onUpdate:modelValue":l[3]||(l[3]=F=>t.inputValue=F),ref:"saveTagInput",size:"small",onKeyup:[fn(t.handleInputConfirm,["enter"]),t.oninputChange]},null,8,["modelValue","onKeyup"])):(De(),Ye(A,{key:1,class:"button-new-tag",size:"small",onClick:t.showInput},{default:oe(()=>[pu]),_:1},8,["onClick"]))])])]),_:1})]),se("div",hu,[c(A,{type:"primary",style:{"margin-top":"22px","margin-right":"22px"},onClick:t.saveArticles},{default:oe(()=>[gu]),_:1},8,["onClick"])])]),se("div",Du,[c(x,{modelValue:t.value,"onUpdate:modelValue":l[4]||(l[4]=F=>t.value=F),style:{height:"100%"},onOnUploadImg:t.onUploadImg,onOnSave:t.Save},null,8,["modelValue","onOnUploadImg","onOnSave"])])])}var Eu=mn(lu,[["render",vu],["__scopeId","data-v-4c7e3015"]]);export{Eu as default};
